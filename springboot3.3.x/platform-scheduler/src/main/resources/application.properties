# Server
server.port=8081
spring.application.name=platform-scheduler

# 数据源配置
spring.datasource.driver-class-name=org.mariadb.jdbc.Driver
spring.datasource.url=jdbc:mariadb://192.168.80.137:3306/scheduler?useUnicode=true&characterEncoding=UTF-8&serverTimezone=Asia/Shanghai
spring.datasource.username=root
spring.datasource.password=123456
spring.datasource.type=com.zaxxer.hikari.HikariDataSource

# Hikari Pool 配置
spring.datasource.hikari.minimum-idle=5
spring.datasource.hikari.maximum-pool-size=15
spring.datasource.hikari.idle-timeout=30000
spring.datasource.hikari.pool-name=SchedulerHikariCP
spring.datasource.hikari.max-lifetime=1800000
spring.datasource.hikari.connection-timeout=30000
spring.datasource.hikari.connection-test-query=SELECT 1

# Quartz 配置
spring.quartz.job-store-type=jdbc
spring.quartz.jdbc.initialize-schema=never
spring.quartz.properties.org.quartz.jobStore.useProperties=false
spring.quartz.properties.org.quartz.scheduler.instanceName=SchedulerCluster
spring.quartz.properties.org.quartz.scheduler.instanceId=AUTO
spring.quartz.properties.org.quartz.jobStore.class=org.springframework.scheduling.quartz.LocalDataSourceJobStore
spring.quartz.properties.org.quartz.jobStore.driverDelegateClass=org.quartz.impl.jdbcjobstore.StdJDBCDelegate
spring.quartz.properties.org.quartz.jobStore.tablePrefix=QRTZ_
spring.quartz.properties.org.quartz.jobStore.isClustered=true
spring.quartz.properties.org.quartz.jobStore.clusterCheckinInterval=10000
spring.quartz.properties.org.quartz.jobStore.dataSource=schedulerDataSource

# Redis 配置
spring.data.redis.password=123456
spring.data.redis.timeout=5000
spring.data.redis.cluster.nodes=192.168.80.137:6379,192.168.80.137:6380,192.168.80.137:6381,192.168.80.137:6382,192.168.80.137:6383,192.168.80.137:6384
spring.data.redis.lettuce.pool.max-active=8
spring.data.redis.lettuce.pool.max-idle=8
spring.data.redis.lettuce.pool.min-idle=0
spring.data.redis.lettuce.pool.max-wait=1000

# MongoDB 配置
spring.data.mongodb.uri=mongodb://root:123456@192.168.80.137:27017/scheduler
spring.data.mongodb.auto-index-creation=true

# MyBatis 配置
mybatis.mapper-locations=classpath:mapper/*.xml
mybatis.configuration.map-underscore-to-camel-case=true
mybatis.configuration.log-impl=org.apache.ibatis.logging.slf4j.Slf4jImpl

# 日志配置
logging.level.com.study.scheduler=debug
logging.level.org.springframework.jdbc.core=debug
logging.level.org.quartz=DEBUG

# Scheduler任务配置
scheduler.log.retain-days=30
scheduler.job.retry.cron=0 0/5 * * * ?
scheduler.job.cleanup.cron=0 0 2 * * ?
